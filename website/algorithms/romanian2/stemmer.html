
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Romanian stemming algorithm</title>
</head>

<body bgcolor="white">
 <table width="75%" align="center" cols="1">
   <h1 align="center">Romanian stemming algorithm</h1>
   
   
   <tr>
     <td>
       <br />&nbsp;
       <h2>Links to resources</h2>
       <dl>
         <dd>
           <table cellpadding="0">
             <tr><td><a href="../.."> Snowball main page</a></td></tr>
             <tr><td><a href="stem_Unicode.sbl"> The stemmer in Snowball (Unicode encoding)</a></td></tr>
             <tr><td><a href="stem_Unicode.c"> The ANSI C stemmer</a></td></tr>
             <tr><td><a href="stem_Unicode.h"> &#x2014; and its header</a></td></tr>
             <tr><td><a href="voc.txt"> Sample Romanian vocabulary</a></td></tr>
             <tr><td><a href="output.txt"> Its stemmed equivalent</a></td></tr>
             <tr><td><a href="diffs.txt"> Vocabulary + stemmed equivalent</a></td></tr>
             <tr><td><a href="tarball.tgz"> Tar-gzipped file of all of the above</a></td></tr>
             <tr><td><br /></td></tr>
             <tr><td><a href="stop.txt"> Romanian stop word list</a></td></tr>
           </table>
         <dd>  
       </dl>
       <br /><br />
       The sample Romanian vocabulary, its stemmed equivalent and the stop word list should be viewable in your
       browser if you select the UTF-8 character set. You can get to this in Microsoft's
       Internet Explorer via <b>View/Encoding/More</b>, and in Netscape via <b>View/Character Set</b>.
       <br /><br />  
     </td>   
   </tr>  
   
   
   <tr>
     <td bgcolor="lightpink">
     <br /><br />
     Here is a sample of Romanian vocabulary, with the stemmed forms that will
     be generated with this algorithm.
     <br /><br />
     <dl>
       <dd>
         <table cellpadding="0">
           <tr>
             <td>  <b>word</b> </td>
             <td></td>
             <td></td>
             <td></td>
             <td> <b>stem</b> </td>
             <td></td>
             <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
             <td></td>
             <td> <b>word</b> </td>
             <td></td>
             <td></td>
             <td></td>
             <td> <b>stem</b> </td>
           </tr>  
           <tr>
             <td>
               abandon<br />
               abandona<br />
               abandon&#259;m<br />
               abandonare<br />
               abandonarea<br />
               abandon&#259;rii<br />
               abandonat<br />
               abandonat&#259;<br />
               abandonate<br />
               abandona&#355;i<br />
               abandoneaz&#259;<br />
               abandoneze<br />
               abandon&#226;nd<br />
               abandonul<br />
               abandonuri<br />
               abandonurile<br />
               abanos<br />
               abateri<br />
               abaterile<br />
               abaterilor<br />
               aba&#355;ia<br />
               aba&#355;ie<br />
               abatoare<br />
               abator<br />
               ab&#259;tut<br />
               abdic&#259;<br />
               abdicare<br />
               abdicarea<br />
               abdic&#259;ri<br />
               abdic&#259;rii<br />
               abdic&#259;rile<br />
               abdice<br />
               abdominale<br />
               abecedarul<br />
               abera<br />
               aberant<br />
               aberant&#259;<br />
               aberante<br />
               aberantele<br />
               aberantului<br />
             </td>
             <td></td>
             <td>
                &nbsp;<tt><b> => </b></tt>&nbsp; 
             </td>
             <td></td>
             <td>
               abandon<br />
               abandon<br />
               abandon<br />
               abandon<br />
               abandonar<br />
               abandon&#259;r<br />
               abandon<br />
               abandonat<br />
               abandonat<br />
               abandon<br />
               abandon<br />
               abandonez<br />
               abandon&#226;nd<br />
               abandon<br />
               abandon<br />
               abandon<br />
               abano<br />
               abater<br />
               abater<br />
               abater<br />
               aba&#355;<br />
               aba&#355;<br />
               abato<br />
               abator<br />
               ab&#259;t<br />
               abdic<br />
               abdic<br />
               abdicar<br />
               abdic&#259;r<br />
               abdic&#259;r<br />
               abdic&#259;r<br />
               abdic<br />
               abdomin<br />
               abecedar<br />
               aber<br />
               aberan<br />
               aberant<br />
               aberant<br />
               aberant<br />
               aberant<br />
             </td>
             <td></td>
             <td> </td>
             <td></td>
             <td>
               sa<br />
               &#351;a<br />
               s&#259;<br />
               sabatic<br />
               sabia<br />
               sabie<br />
               s&#259;bii<br />
               &#351;ablon<br />
               sabota<br />
               sabotaj<br />
               sabotajul<br />
               sabotare<br />
               sabotarea<br />
               sabotat<br />
               saboteze<br />
               sabotori<br />
               sac<br />
               &#351;acali<br />
               sacerdo&#355;i<br />
               saci<br />
               sacii<br />
               saco&#351;e<br />
               sacr&#259;<br />
               sacral&#259;<br />
               sacralitate<br />
               sacralizare<br />
               sacralizarea<br />
               sacraliz&#259;rii<br />
               sacralizat&#259;<br />
               sacramental<br />
               sacrific<br />
               sacrifica<br />
               sacrific&#259;m<br />
               sacrificarea<br />
               sacrific&#259;rii<br />
               sacrificat<br />
               sacrificat&#259;<br />
               sacrificate<br />
               sacrifica&#355;i<br />
               sacrifice<br />
             </td>
             <td></td>
             <td>
                &nbsp;<tt><b> => </b></tt>&nbsp; 
             </td>
             <td></td>
             <td>
               sa<br />
               &#351;a<br />
               s&#259;<br />
               sabatic<br />
               sab<br />
               sab<br />
               s&#259;b<br />
               &#351;ablon<br />
               sabot<br />
               sabotaj<br />
               sabotaj<br />
               sabot<br />
               sabotar<br />
               sabot<br />
               sabotez<br />
               sabotor<br />
               sac<br />
               &#351;acal<br />
               sacerdo&#355;<br />
               sac<br />
               sac<br />
               saco&#351;<br />
               sacr<br />
               sacral<br />
               sacralitat<br />
               sacraliz<br />
               sacralizar<br />
               sacraliz&#259;r<br />
               sacralizat<br />
               sacrament<br />
               sacrific<br />
               sacrific<br />
               sacrific<br />
               sacrificar<br />
               sacrific&#259;r<br />
               sacrific<br />
               sacrificat<br />
               sacrificat<br />
               sacrific<br />
               sacrific<br />
             </td>
           </tr>
         </table>
       </dd>
     </dl>  
   </tr>
   
   
   <tr>
     <td>
       <br /><br /><br />&nbsp;
       <h2>The stemming algorithm</h2>
       Letters in Romanian include the following accented forms:
       <dl>
         <dd>
           <b><i>&#259;  &nbsp;  &#226;  &nbsp;  &#238;  &nbsp;  &#351;  &nbsp;  &#355;</i></b>
         </dd>
       </dl>
       The following letters are vowels:
       <dl>
         <dd>
           <b><i>a  &nbsp;  &#259;  &nbsp;  &#226;  &nbsp;  e  &nbsp;  i  &nbsp;  &#238;  &nbsp;  o  &nbsp;  u</i></b>
         </dd>
       </dl>
       <i>RV</i> and <i>R</i>1 are first set up in the standard way, but then they are adjusted so that the 
       region before them contains at least 3 letters.
       <i>RV</i> is the region after the first vowel, or the end of the word
       if it contains no vowel.
       <i>R</i>1 is the region after the first non-vowel following a vowel, or the end of
       the word if there is no such non-vowel.
       (See <a href="../../texts/r1r2.html"> note</a> on <i>R</i>1 and <i>R</i>2.)
       <br /><br />
       For example:
       <br />
       <pre>
   c o n v i n g &#259; t o r
      |<---   RV     -->|
        |<---   R1  --->|
       </pre>
       Words are assumed to be in lower case. 
       Also, words that contain hyphens (caut&#259;-m&#259;) must be separated into the constituent words (caut&#259;, m&#259;).
       <br /><br />
       <br />
       
       Always do step 1. 
       <br /><br />
       Step 1: Verb suffixes in the non-personal moods
       <dl>
         <dd>
           Search for the longest among the following suffixes in <I>R</I>1, and if found, delete.
           <br /><br />
           <dl>
             <dd>
               <b><i>
                 are  &nbsp;  ere  &nbsp;  ire  &nbsp;  &#226;re
                 &nbsp;  at  &nbsp;  ut  &nbsp;  s  &nbsp;  t  &nbsp;  it  &nbsp;  &#226;t
                 &nbsp;  ind  &nbsp;  &#226;nd
                 &nbsp;  indu  &nbsp;  &#226;ndu
               </i></b>
             </dd>
           </dl>
         </dd>
       </dl>        
       
       <br />
       Do step 2 if no ending was removed by step 1.
       <br /><br />
       Step 2: Verb suffixes in the tenses of the indicative mood
       <dl>
         <dd>
           Search for the longest among the following suffixes, and perform the action indicated. 
           <br /><br />
           <dl>
             <dt>
               <b><i>
                 ez  &nbsp;  ezi  &nbsp;  eaz&#259;  &nbsp;  esc  &nbsp;  e&#351;ti  &nbsp;  e&#351;te
                 &nbsp;  &#259;sc  &nbsp;  &#259;&#351;ti  &nbsp;  &#259;&#351;te
                 &nbsp;  am  &nbsp;  ai  &nbsp;  au  &nbsp;  eam  &nbsp;  eai  &nbsp;  ea  &nbsp;  eau  &nbsp;  iam  
                 &nbsp;iai  &nbsp;  ia  &nbsp;  iau  &nbsp;  ea&#355;i  &nbsp;  ia&#355;i
                 &nbsp;  &#226;i
                 &nbsp;  ase  &nbsp;  use  &nbsp;  ise  &nbsp;  &#226;se
                 &nbsp;  a&#351;i  &nbsp;  ar&#259;m  &nbsp;  ar&#259;&#355;i  &nbsp;  ar&#259;
                 &nbsp;  u&#351;i  &nbsp;  ur&#259;m  &nbsp;  ur&#259;&#355;i  &nbsp;  ur&#259;
                 &nbsp;  i&#351;i  &nbsp;  ir&#259;m  &nbsp;  ir&#259;&#355;i  &nbsp;  ir&#259;
                 &nbsp;  &#226;&#351;i  &nbsp;  &#226;r&#259;m  &nbsp;  &#226;r&#259;&#355;i &nbsp; &#226;r&#259;
                 &nbsp;  asem  &nbsp;  ase&#351;i  &nbsp;  aser&#259;m  &nbsp;  aser&#259;&#355;i  &nbsp;  aser&#259;
                 &nbsp;  usem  &nbsp;  use&#351;i  &nbsp;  user&#259;m  &nbsp;  user&#259;&#355;i  &nbsp;  user&#259;
                 &nbsp;  isem  &nbsp;  ise&#351;i  &nbsp;  iser&#259;m  &nbsp;  iser&#259;&#355;i  &nbsp;  iser&#259;
                 &nbsp;  &#226;sem  &nbsp;  &#226;se&#351;i  &nbsp;  &#226;ser&#259;m  &nbsp;  &#226;ser&#259;&#355;i  
                 &nbsp;  &#226;ser&#259;
               </i></b>
             </dt>
             <dd>  
               if preceded by a consonant or <b><i>u</i></b>, delete if in <i>R</i>1 <br />
               (the preceding consonant or <b><i>u</i></b> need not be in <i>R</i>1)
             </dd>
             <dt>
               <b><i>
                 &#259;m  &nbsp;  em  &nbsp;  im  &nbsp;  &#226;m  &nbsp;  a&#355;i  &nbsp;  e&#355;i
                 &nbsp;   i&#355;i  &nbsp;  &#226;&#355;i  &nbsp;   seise  &nbsp;  sese  &nbsp;  se&#351;i
                 &nbsp;   ser&#259;m  &nbsp;  ser&#259;&#355;i  &nbsp;  ser&#259;  &nbsp;  sesem sese&#351;i
                 &nbsp;   seser&#259;m  &nbsp;  seser&#259;&#355;i  &nbsp;  seser&#259;
               </i></b>
             </dt>
             <dd>  
               delete if in <i>R</i>1 <br />
             </dd>
             <dt>
               <b><i>ui</i></b>
             </dt>
             <dd>  
               if preceded by a consonant other than <b><i>l</i></b>, delete if in <i>R</i>1 <br />
               (the preceding consonant need not be in <i>R</i>1)
             </dd>
           </dl>
         </dd>
       </dl>
       <br />
       
       Do each of steps 3 and 4 if no ending was removed by steps 1 or 2.
       <br /><br />
       Step 3: Article suffixes (for noun and adjective)
       <dl>
         <dd>
           Search for the longest among the following suffixes, and perform the action indicated. 
           <br /><br />
           <dl>
             <dt>
               <b><i>
                 ul  &nbsp;  l  &nbsp;  a  &nbsp;  ua  &nbsp;  ia  &nbsp;  eaua  &nbsp;  lui
                 &nbsp;   lor  &nbsp;  o  &nbsp;  ule
               </i></b>
             </dt>
             <dd>  
               delete if in <i>RV</i> <br />
             </dd>
             <dt>
               <b><i>le</i></b>
             </dt>
             <dd>  
               if preceded by a vowel, delete if in <i>RV</i><br />
               (the preceding vowel need not be in <i>RV</i>)
             </dd>
             <dt>
               <b><i>i</i></b>
             </dt>
             <dd>  
               if not preceded by <b><i>ur</i></b>, delete if in <i>RV</i> <br />
               (the preceding <b><i>ur</i></b> need not be in <i>RV</i>)
             </dd>
           </dl>
         </dd>
       </dl>
       <br />
       
       Step 4: Plural suffixes (for noun and adjective)
       <dl>
         <dd>
           Search for the longest among the following suffixes, and perform the action indicated. 
           <br /><br />
           <dl>
             <dt>
               <b><i>
                 i  &nbsp;  uri  &nbsp;  e
               </i></b>
             </dt>
             <dd>  
               delete if in <i>RV</i> <br />
             </dd>
             <dt>
               <b><i>le</i></b>
             </dt>
             <dd>  
               if preceded by a vowel, delete if in <i>RV</i><br />
               (the preceding vowel need not be in <i>RV</i>)
             </dd>
           </dl>
         </dd>
       </dl>
       <br />
       
       Always do step 5.
       <br /><br />
       Step 5: Residual suffixes
       <dl>
         <dd>
           Search for the longest among the following suffixes in <I>RV</I>, and if found, delete. 
           <br /><br />
           <dl>
             <dd>
               <b><i>
                 a  &nbsp;  e  &nbsp;  i  &nbsp;  u  &nbsp;  &#238;  &nbsp;  &#259;  &nbsp;  &#226;
               </i></b>
             </dd>
           </dl>
         </dd>
       </dl> 
       <br />       
     </td>
   </tr>
   
   
   <tr>
     <td bgcolor="lightblue">
       <br />&nbsp;
       <h2>The same algorithm in Snowball</h2>
       <br />
         <dl>
           <dd>
             <pre>
stringescapes {}

/* special characters (Unicode) */
   
stringdef ab    hex '103'                                // a-breve
stringdef a^    hex 'E2'                                 // a-circumflex
stringdef i^    hex 'EE'                                 // i-circumflex
stringdef s,    hex '15F'                                // s-cedilla
stringdef t,    hex '163'                                // t-cedilla


routines ( mark_regions RV R1
           verb_non_personal_moods
           verb_conjugation
           definite_article
           number_plural
           residual_suffix
)

externals ( stem )

integers ( pV p1 x )

groupings ( v )

define v 'aeiou{ab}{a^}{i^}'


define mark_regions as (

    $pV = limit
    $p1 = limit

    test(hop 3 setmark x)
    
    gopast v  setmark pV 
    try($pV < x  $pV = x)                                // at least 3
    gopast non-v setmark p1
    try($p1 < x  $p1 = x)                                // at least 3
)


backwardmode (

    define RV as $pV <= cursor
    define R1 as $p1 <= cursor

    define verb_non_personal_moods as (
        [substring] R1 among (
            'are' 'ere' 'ire' '{a^}re'                   //infinitive
            'at' 'ut' 's' 't' 'it' '{a^}t'               //participle
            'ind' '{a^}nd'                               //gerund 
            'indu' '{a^}ndu'
                (delete)
        )
    )

    define verb_conjugation as (
        setlimit tomark p1 for ([substring])
        among (
            'ez' 'ezi' 'eaz{ab}' 'esc' 'e{s,}ti' 
            'e{s,}te' '{ab}sc' '{ab}{s,}ti' '{ab}{s,}te' //prezent
            'am' 'ai' 'au' 'eam' 'eai' 'ea' 'eau' 
            'iam' 'iai' 'ia' 'iau' 'ea{t,}i' 'ia{t,}i'   //imperfect  
            '{a^}i'
            'a{s,}i' 'ar{ab}m' 'ar{ab}{t,}i' 'ar{ab}'
            'u{s,}i' 'ur{ab}m' 'ur{ab}{t,}i' 'ur{ab}'
            'i{s,}i' 'ir{ab}m' 'ir{ab}{t,}i' 'ir{ab}'
            '{a^}{s,}i' '{a^}r{ab}m' '{a^}r{ab}{t,}i'
            '{a^}r{ab}'                                  //simple perfect
            'ase' 'use' 'ise' '{a^}se'
            'asem' 'ase{s,}i' 'aser{ab}m' 'aser{ab}{t,}i' 'aser{ab}'
            'usem' 'use{s,}i' 'user{ab}m' 'user{ab}{t,}i' 'user{ab}'
            'isem' 'ise{s,}i' 'iser{ab}m' 'iser{ab}{t,}i' 'iser{ab}'
            '{a^}sem' '{a^}se{s,}i' '{a^}ser{ab}m' '{a^}ser{ab}{t,}i'
            '{a^}ser{ab}'                                //pluperfect
                (test (non-v or 'u') delete)
            '{ab}m' 'em' 'im' '{a^}m' 'a{t,}i' 'e{t,}i' 
            'i{t,}i' '{a^}{t,}i'                         //prezent
            'se{s,}i' 'ser{ab}m' 'ser{ab}{t,}i' 'ser{ab}'
            'sei''se'                                    //simple perfect
            'sesem' 'sese{s,}i' 'seser{ab}m' 'seser{ab}{t,}i' 'seser{ab}'
            'sese'                                       //pluperfect            
                (delete)
            'ui'                                         //simple perfect
                (test non-v not 'l' delete)              //not match 'lui' (article)
        )
    )

    define definite_article as (
        setlimit tomark pV for ([substring])
        among (
            'ul' 'l' 'a' 'ua' 'ia' 'eaua'
            'lui' 'lor'                                  //genitive + dative
            'o' 'ule'                                    //vocative
                (delete)
            'le'
                (test v delete)
            'i'
                (not 'ur' delete)                        //not match uri (plural)
        )
    )

    define number_plural as (
        setlimit tomark pV for ([substring])
        among (
            'i' 'uri' 'e'
                (delete)
            'le'
                (test v delete)   
        )
    )

    define residual_suffix as (
        [substring] RV among (
            'a' 'e' 'i' 'u' '{i^}' '{ab}' '{a^}'
            // 'o' 
               (delete)
        )
    )
)

define stem as (
    do mark_regions
    backwards (
        do (
             verb_non_personal_moods or verb_conjugation or
             ( try definite_article and number_plural )
        )
        do residual_suffix
    )
)
           </pre>           
         </dd>
       </dl>
     </td>
   </tr>
 </table>
</body>
</html>
